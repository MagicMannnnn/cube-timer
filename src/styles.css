/* === Updated styles.css (sidebar-only scroll, dark scrollbars) === */
:root{
  --bg:#0f1115;
  --text:#e7e7e7;
  --muted:#9aa1a9;
  --accent:#3a7afe;
  --border:#252932;
  --sidebar-bg:#151821;
  --panel-bg:#0e1117;
  --timer-color:#e7e7e7;
  --radius:14px;
  --space:12px;
  --sidebar-w:300px;

  /* Scrollbars */
  --scroll-track: #0d1117;
  --scroll-thumb: #2a2f3a;
  --scroll-thumb-hover: #3a4150;
}

/* Base */
*{box-sizing:border-box}
html,body,#root{height:100%; overflow:hidden}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
}
button,input,select{font:inherit;color:inherit}
a{color:inherit;text-decoration:none}

/* Layout */
.app{display:flex; height:100vh}

.sidebar{
  position: sticky;
  top: 0;
  height: 100vh;
  overflow: hidden;
  width:var(--sidebar-w);
  background:var(--sidebar-bg);
  border-right:1px solid var(--border);
  padding:var(--space);
  display:flex;
  flex-direction:column;
  gap:var(--space);
}

.sidebar .row{display:flex;gap:8px;align-items:center}
.sidebar select, .sidebar input[type="text"]{
  width:100%;
  background:var(--panel-bg);
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
}
.sidebar button{
  background:var(--panel-bg);
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
  cursor:pointer;
}
.sidebar button:hover{filter:brightness(1.1)}
.session-header{display:flex;align-items:center;gap:8px}
.session-delete{margin-left:auto;background:#261d1d}

/* Sidebar solves list scrolls */
.times{
  flex:1;
  min-height: 0;
  overflow:auto;
  border:1px solid var(--border);
  border-radius:12px;
  padding:6px;
  background:var(--panel-bg);
}

/* Dark, clean scrollbars for .times, .bottomdock, .modal-body */
.times,
.bottomdock,
.modal-body{
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--scroll-thumb) var(--scroll-track);
}
.times::-webkit-scrollbar,
.bottomdock::-webkit-scrollbar,
.modal-body::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}
.times::-webkit-scrollbar-track,
.bottomdock::-webkit-scrollbar-track,
.modal-body::-webkit-scrollbar-track{
  background: var(--scroll-track);
  border-radius: 999px;
}
.times::-webkit-scrollbar-thumb,
.bottomdock::-webkit-scrollbar-thumb,
.modal-body::-webkit-scrollbar-thumb{
  background: var(--scroll-thumb);
  border-radius: 999px;
  border: 2px solid var(--scroll-track);
}
.times::-webkit-scrollbar-thumb:hover,
.bottomdock::-webkit-scrollbar-thumb:hover,
.modal-body::-webkit-scrollbar-thumb:hover{
  background: var(--scroll-thumb-hover);
}

.time-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  border-radius:10px;
  cursor:pointer;
}
.time-item:hover{background:#161b22}
.time-item:hover{background:rgba(255,255,255,0.03)}
.time-meta{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:.9rem}
.time-index{font-weight:800;font-size:1.15rem;margin-right:6px}

/* Main area never scrolls */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden}
.topbar{
  display:flex;
  justify-content:space-between;
  padding:var(--space);
  border-bottom:1px solid var(--border)
}
.icon-btn{
  background:transparent;
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px 10px;
  cursor:pointer
}

.timer-wrap{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:var(--space);
}
.scramble{
  order:0;
  color:var(--text);
  text-align:center;
  max-width:1400px;
  line-height:1.4;
  padding:0 var(--space);
  margin:8px auto 0;
  font-weight:600;
  font-size:clamp(1.4rem,3vw,2.2rem);
  word-spacing: clamp(8px, 1.2vw, 18px);
}
.timer-center{order:1;flex:1;display:flex;align-items:center;justify-content:center}
.timer{
  font-size:clamp(3.5rem,10vw,7rem);
  line-height:1;
  letter-spacing:1px;
  color:var(--timer-color);
  user-select:none;
  transition:color .15s ease
}
.timer.holding{color:#f59e0b}
.timer.ready{color:#22c55e}

/* Stats / Bottom bar */
.bottombar{
  min-height:140px;
  border-top:1px solid var(--border);
  display:flex;
  align-items:stretch;
  justify-content:flex-start;
  padding:12px var(--space);
  gap:18px;
  flex-wrap:wrap
}
.bottombar .stat{
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px 18px;
  min-width:180px;
  flex:1 1 260px;
  background:var(--panel-bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center
}
.bottombar .stat .k{font-size:1rem;color:var(--muted);text-align:center}
.bottombar .stat .v{font-weight:700;font-size:1.25rem;line-height:1.4;text-align:center}

.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center}
.modal{
  background:var(--panel-bg);
  border:1px solid var(--border);
  border-radius:14px;
  max-width:520px;
  width:92%;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px
}
.modal .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.badge{border:1px solid var(--border);padding:6px 10px;border-radius:10px;font-size:.9rem;background:var(--panel-bg);color:#fff;cursor:pointer}
.badge:hover{filter:brightness(1.08)}
.status-OK{color:#8dffb0}
.status-PLUS2{color:#ffd27f}
.status-DNF{color:#ff8f8f}

/* Responsive */
@media (max-width:900px){
  :root{--sidebar-w:220px}
  .timer{font-size:4rem}
}
@media (max-width:680px){
  .app{flex-direction:column}
  .sidebar{width:100%;border-right:none;border-bottom:1px solid var(--border);order:1;height:auto;position:static}
  .main{order:0}
}

/* Form elements in modals */
.modal input[type="number"],
.modal input[type="text"],
.modal select,
.modal textarea{
  background:#4b5563;
  color:#fff;
  border:1px solid #4b5563;
  border-radius:10px;
  padding:10px;
}
.modal label{color:var(--text)}

/* Data / Settings UI */
.tabs{display:flex;gap:6px}
.tab{padding:8px 12px;border:1px solid var(--border);background:var(--panel-bg);color:#fff;border-radius:10px;cursor:pointer}
.tab.active{outline:2px solid #3a7afe}
.data-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.data-row{display:flex;align-items:center;gap:8px;background:var(--panel-bg);border:1px solid var(--border);border-radius:10px;padding:8px}
.data-row .abbr{font-weight:600}
.data-row .qm{margin-left:auto;border:1px solid var(--border);border-radius:999px;width:20px;height:20px;display:inline-flex;align-items:center;justify-content:center;opacity:.8;cursor:help;background:var(--panel-bg)}

.modal-wide{max-width:1056px}
.data-grid.wide{grid-template-columns:1fr 1fr}
.data-row .spacer{flex:1}
.statline{opacity:.9}
.bestline{margin:6px 0 8px 0}
.stat[draggable]{cursor:grab}
.stat[draggable]:active{cursor:grabbing}

/* Modal content scroll */
.modal-body{min-height:420px;max-height:60vh;overflow:auto}

/* Bottom dock (graph area resizer) */
.bottomdock-wrap{width:100%;}
.bottomdock-resize{
  height:6px;
  cursor:ns-resize;
  background:linear-gradient(to right, transparent 0, rgba(255,255,255,.15) 40%, rgba(255,255,255,.15) 60%, transparent 100%)
}
.bottomdock{
  border-top:1px solid var(--border);
  padding:12px var(--space);
  overflow:auto;
  background:transparent
}
.graph-card{
  position:relative;
  border:1px solid var(--border);
  background:var(--panel-bg);
  border-radius:14px;
  padding:8px 12px;
  min-width:280px;
  flex:1 1 520px
}
.graph-title{font-weight:700;margin-bottom:4px}
.graph-meta{position:absolute;top:8px;right:12px;opacity:.6;font-size:.9rem}

/* Settings header */
.desc{opacity:.75;font-size:.9rem}
.settings-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
  height:52px;
  padding-bottom:4px;
  border-bottom:1px solid var(--border);
  flex-wrap:nowrap
}
.settings-header .tabs{display:flex;gap:6px}
.settings-header .tab{height:36px;display:inline-flex;align-items:center}
.graph-row{ width:100%; display:flex; gap:18px; margin-bottom:18px }
.graph-row:last-child{ margin-bottom:0 }


/* === Improved mobile responsiveness === */
@media (max-width: 680px) {
  .app {
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }

  /* Sidebar sits on top, scrolls internally if content too long */
  .sidebar {
    width: 100%;
    max-height: 45vh; /* keeps it from overtaking the screen */
    overflow-y: auto;
    border-right: none;
    border-bottom: 1px solid var(--border);
    position: relative;
    order: 1;
    z-index: 2;
  }

  /* Sidebar scrollbar styling (reuse same variables) */
  .sidebar {
    scrollbar-width: thin;
    scrollbar-color: var(--scroll-thumb) var(--scroll-track);
  }
  .sidebar::-webkit-scrollbar {
    width: 8px;
  }
  .sidebar::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb);
    border-radius: 999px;
  }

  /* Main content below, fills the rest of viewport */
  .main {
    flex: 1;
    order: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .timer-wrap {
    flex: 1;
    overflow-y: auto;
    padding: var(--space);
  }

  .bottombar {
    flex-wrap: wrap;
    padding: 10px;
  }

  /* Optional: make sidebar collapsible */
  .sidebar.collapsed {
    max-height: 80px;
    overflow: hidden;
    border-bottom: none;
  }
}

/* === Mobile sidebar resizing (similar to bottomdock) === */
@media (max-width: 680px) {
  .sidebar {
    position: relative;
    width: 100%;
    max-height: 50vh; /* initial height */
    overflow-y: auto;
    border-bottom: 1px solid var(--border);
    transition: max-height 0.1s ease-out;
  }

  /* Drag handle at top */
  .sidebar-resize {
    height: 6px;
    cursor: ns-resize;
    background: linear-gradient(
      to right,
      transparent 0,
      rgba(255, 255, 255, 0.15) 40%,
      rgba(255, 255, 255, 0.15) 60%,
      transparent 100%
    );
    position: sticky;
    border-radius: 4px;
  }

}


@media (max-width: 680px) {
  .sidebar {
    position: relative;
    width: 100%;
    max-height: 50vh;
    overflow-y: auto;
    border-bottom: 1px solid var(--border);
    transition: max-height 0.25s ease;
  }

  .sidebar.collapsed {
    max-height: 70px;
    overflow: hidden;
    position: relative;
  }

  /* Always keep the resize bar visible at the top */
  .sidebar-resize {
    height: 6px;
    cursor: ns-resize;
    background: linear-gradient(
      to right,
      transparent 0,
      rgba(255, 255, 255, 0.15) 40%,
      rgba(255, 255, 255, 0.15) 60%,
      transparent 100%
    );
    position: sticky; /* key part */
    top: 0;
    left: 0;
    right: 0;
    z-index: 10;
  }

  /* In collapsed state, make sure it's still visible */
  .sidebar.collapsed .sidebar-resize {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 10px; /* make it a bit larger for easier tapping */
  }
}
